- name: static ipaddress and DNS
  hosts: new
  remote_user: ka
  become: yes

  vars:
    interface_name : 
    static_ ip: 
    subnet_mask : 
    gateway : 
    dns_servers:
      -8.8.8.8
      -4.2.2.2

  task : 
    ansible.buildin.shell : |
      echo "network :
      version:2
      renderer : networkd
      ethernets:
        {{interface_name}}
          dhcp:no
          addresses : [{{static_ ip}}/24]
          gateway4 : {{gateway}}
          nameservers : 
            addresses: [{{dns_servers}}] |  join
    "